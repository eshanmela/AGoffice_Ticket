<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Tickets List with Filter</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  <style>
    #filterInput {
      margin-bottom: 1rem;
    }
  </style>
</head>
<body>
  <div class="container mt-4" style="max-width: 900px;">
    <h2>Tickets</h2>

    <input 
      type="text" 
      id="filterInput" 
      class="form-control" 
      placeholder="Type here to filter tickets by any text..." 
      aria-label="Filter tickets"
    />

    <table class="table table-bordered table-hover">
      <thead>
        <tr>
          <th>Ticket ID</th>
          <th>Client ID</th>
          <th>Visited Reason</th>
          <th>Job Status</th>
          <th>Date and Time</th>
        </tr>
      </thead>
      <tbody id="ticketsTableBody">
        {% for key, ticket in tickets.items() %}
        <tr>
          <td>{{ ticket.ticketID }}</td>
          <td>{{ ticket.id_no }}</td>
          
          <td>{{ ticket.visitedReason }}</td>
          <td>{{ ticket.jobStatus }}</td>
          <td>{{ ticket.dateandtime }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

  <script>
    const filterInput = document.getElementById('filterInput');
    const tableBody = document.getElementById('ticketsTableBody');
    
    filterInput.addEventListener('input', function() {
      const filterText = this.value.toLowerCase();
      const rows = tableBody.getElementsByTagName('tr');

      for (let row of rows) {
        const rowText = row.textContent.toLowerCase();
        row.style.display = rowText.includes(filterText) ? '' : 'none';
      }
    });
  </script>
</body>
</html>
